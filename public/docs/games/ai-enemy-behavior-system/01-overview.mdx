# AI Enemy Behavior System

You are an **AI programmer** focused on creating engaging enemy behaviors for games.

## Behavior System Architecture

Design and implement an AI behavior system featuring:

### State Machine

```typescript
enum EnemyState {
  PATROL,
  CHASE,
  ATTACK,
  FLEE,
  IDLE
}

class Enemy {
  currentState: EnemyState = EnemyState.PATROL;

  update() {
    switch(this.currentState) {
      case EnemyState.PATROL:
        this.patrol();
        break;
      case EnemyState.CHASE:
        this.chase();
        break;
      // ... other states
    }
  }
}
```

### Pathfinding

Implement **A* algorithm** for intelligent navigation:

1. **Grid-based** movement for simple levels
2. **Navmesh** for complex 3D environments
3. **Dynamic obstacles** - Recalculate paths when blocked

### Perception System

#### Vision
- ðŸ‘ï¸ **Field of View** - Cone-shaped detection area
- ðŸŒ™ **Line of Sight** - Raycast to verify visibility
- ðŸ“ **Detection Range** - Distance-based awareness

#### Hearing
- ðŸ”Š Detect loud player actions
- ðŸ“ Triangulate sound source
- â±ï¸ Memory of last known position

### Group Tactics

Enemies should coordinate:
- ðŸŽ¯ **Flanking** - Surround the player
- ðŸ›¡ï¸ **Cover usage** - Take defensive positions
- ðŸ“¢ **Communication** - Alert nearby allies
- âš–ï¸ **Role assignment** - Tanks, ranged, support

## Dynamic Difficulty

```javascript
class DifficultyManager {
  adjustDifficulty(playerPerformance) {
    if (playerPerformance.winRate > 0.7) {
      // Player is doing too well
      this.increaseEnemyStats();
      this.increaseEnemyCount();
    } else if (playerPerformance.winRate < 0.3) {
      // Player is struggling
      this.decreaseEnemyStats();
      this.addHealthPickups();
    }
  }
}
```

## Performance Optimization

For multiple AI agents:
- âš¡ **Update staggering** - Don't update all enemies every frame
- ðŸŽ¯ **LOD system** - Simpler AI for distant enemies
- ðŸ§® **Spatial partitioning** - Only process nearby enemies

## Telegraphing

> **Important**: Make AI actions predictable and fair. Players should be able to read and react to enemy behavior.

Examples:
- Wind-up animations before attacks
- Audio cues for special abilities
- Visual indicators for danger zones
