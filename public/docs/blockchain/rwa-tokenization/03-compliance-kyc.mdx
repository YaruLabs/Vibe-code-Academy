# Implementing KYC & Compliance Registry

Real-world asset tokenization requires regulatory compliance. Let's build a **Privacy-Preserving KYC Registry** that verifies investors while keeping personal data encrypted using COTI's MPC.

---

## 1. Create the KYC Registry Contract

**Action Required:** Use COTI MCP to generate the KYC contract:

<div style={{
  background: 'linear-gradient(to right, #3b82f6, #8b5cf6)',
  padding: '2px',
  borderRadius: '12px',
  margin: '20px 0',
  boxShadow: '0 0 20px rgba(139, 92, 246, 0.3)'
}}>
  <div style={{
    background: '#0f172a',
    borderRadius: '11px',
    padding: '24px',
    color: '#e2e8f0',
    position: 'relative'
  }}>
    <div style={{
      display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'
    }}>
      <span style={{color: '#94a3b8', textTransform: 'uppercase', fontSize: '0.75rem', letterSpacing: '1px', fontWeight: 'bold'}}>
        COPY THIS EXACT PROMPT
      </span>
    </div>

    <div style={{
      fontSize: '1.1rem',
      lineHeight: '1.6',
      fontFamily: 'system-ui, -apple-system, sans-serif',
      borderLeft: '4px solid #8b5cf6',
      paddingLeft: '16px',
      color: '#fff'
    }}>
      "Create a KYCRegistry smart contract on COTI inheriting MpcCore, AccountOnboard, and AccessControl. Define VERIFIER_ROLE for compliance officers. Create InvestorKYC struct with: isVerified (bool), verificationLevel (uint8 for tiers 1-3), countryCode (encrypted ctUint64), expirationDate (uint256), and verifierAddress. Store in mapping from address to InvestorKYC."
    </div>
  </div>
</div>

---

## 2. KYC Verification Levels

<div style={{
  background: 'rgba(15, 23, 42, 0.9)',
  borderRadius: '12px',
  padding: '24px',
  margin: '20px 0',
  border: '1px solid rgba(139, 92, 246, 0.3)'
}}>

| Level | Requirements | Max Investment |
|-------|-------------|----------------|
| 1 | Email + Basic ID | $10,000 |
| 2 | Government ID + Address | $100,000 |
| 3 | Accredited Investor | Unlimited |

</div>

---

## 3. Implement Verification Functions

**Action Required:** Add KYC verification:

<div style={{
  background: 'linear-gradient(to right, #3b82f6, #8b5cf6)',
  padding: '2px',
  borderRadius: '12px',
  margin: '20px 0',
  boxShadow: '0 0 20px rgba(139, 92, 246, 0.3)'
}}>
  <div style={{
    background: '#0f172a',
    borderRadius: '11px',
    padding: '24px',
    color: '#e2e8f0',
    position: 'relative'
  }}>
    <div style={{
      display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'
    }}>
      <span style={{color: '#94a3b8', textTransform: 'uppercase', fontSize: '0.75rem', letterSpacing: '1px', fontWeight: 'bold'}}>
        COPY THIS EXACT PROMPT
      </span>
    </div>

    <div style={{
      fontSize: '1.1rem',
      lineHeight: '1.6',
      fontFamily: 'system-ui, -apple-system, sans-serif',
      borderLeft: '4px solid #8b5cf6',
      paddingLeft: '16px',
      color: '#fff'
    }}>
      "Add verifyInvestor function (VERIFIER_ROLE) taking investor address, level (1-3), encrypted country code (itUint64), and expiration. Store encrypted country using MPC.validateCiphertext, record verifier for audit, emit KYCVerified event. Add query functions: isKYCValid(address), getKYCLevel(address), canInvest(address, amount)."
    </div>
  </div>
</div>

---

## 4. Add Country Restrictions with Privacy

**Action Required:** Implement geographic compliance:

<div style={{
  background: 'linear-gradient(to right, #3b82f6, #8b5cf6)',
  padding: '2px',
  borderRadius: '12px',
  margin: '20px 0',
  boxShadow: '0 0 20px rgba(139, 92, 246, 0.3)'
}}>
  <div style={{
    background: '#0f172a',
    borderRadius: '11px',
    padding: '24px',
    color: '#e2e8f0',
    position: 'relative'
  }}>
    <div style={{
      display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'
    }}>
      <span style={{color: '#94a3b8', textTransform: 'uppercase', fontSize: '0.75rem', letterSpacing: '1px', fontWeight: 'bold'}}>
        COPY THIS EXACT PROMPT
      </span>
    </div>

    <div style={{
      fontSize: '1.1rem',
      lineHeight: '1.6',
      fontFamily: 'system-ui, -apple-system, sans-serif',
      borderLeft: '4px solid #8b5cf6',
      paddingLeft: '16px',
      color: '#fff'
    }}>
      "Add country restrictions using encrypted comparisons. Create mapping of restricted country codes as ctUint64. Add addRestrictedCountry(itUint64) for admins. Implement isCountryAllowed(address) using MPC.ne to check investor's encrypted country against restricted list, returning gtBool. Country data stays private but compliance is enforced."
    </div>
  </div>
</div>

---

## 5. KYC Management and Audit Trail

**Action Required:** Complete the registry:

<div style={{
  background: 'linear-gradient(to right, #3b82f6, #8b5cf6)',
  padding: '2px',
  borderRadius: '12px',
  margin: '20px 0',
  boxShadow: '0 0 20px rgba(139, 92, 246, 0.3)'
}}>
  <div style={{
    background: '#0f172a',
    borderRadius: '11px',
    padding: '24px',
    color: '#e2e8f0',
    position: 'relative'
  }}>
    <div style={{
      display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'
    }}>
      <span style={{color: '#94a3b8', textTransform: 'uppercase', fontSize: '0.75rem', letterSpacing: '1px', fontWeight: 'bold'}}>
        COPY THIS EXACT PROMPT
      </span>
    </div>

    <div style={{
      fontSize: '1.1rem',
      lineHeight: '1.6',
      fontFamily: 'system-ui, -apple-system, sans-serif',
      borderLeft: '4px solid #8b5cf6',
      paddingLeft: '16px',
      color: '#fff'
    }}>
      "Add: 1) revokeKYC(address, reason) with KYCRevoked event, 2) updateKYCLevel(address, newLevel), 3) renewKYC(address, newExpiration), 4) batchVerify for multiple investors, 5) KYCAction struct for audit trail with actionType, investor, verifier, timestamp, reason, 6) getAuditLog and getInvestorAuditHistory functions."
    </div>
  </div>
</div>

---

## Checkpoint

You now have:
- Multi-level KYC verification
- Encrypted country codes
- Geographic restriction enforcement
- Complete audit trail
- Batch processing

**Next Step:** Implement Dividend Distribution!
